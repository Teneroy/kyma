apiVersion: serverless.kyma-project.io/v1alpha1
kind: Function
metadata:
  labels:
    serverless.kyma-project.io/build-resources-preset: local-dev
    serverless.kyma-project.io/function-resources-preset: S
    serverless.kyma-project.io/replicas-preset: S
  name: json-parser-test
spec:
  maxReplicas: 1
  minReplicas: 1
  deps: |-
    { 
      "name": "json-parser-test",
      "version": "1.0.0",
      "dependencies": {}
    }
  source: |-
    module.exports = { 
      main: function (event, context) {
        console.log({key1: 12345, key2: "abc", time: "2006-07-28T13:22:04Z"});
        return "Hello World!";
      }
    }
---
apiVersion: gateway.kyma-project.io/v1alpha1
kind: APIRule
metadata:
  name: json-parser-test
spec:
  gateway: kyma-gateway.kyma-system.svc.cluster.local
  rules:
    - path: /.*
      methods: ["GET"]
      accessStrategies:
        - handler: allow
          config: {}
  service:
    host: json-parser-test
    name: json-parser-test
    port: 80